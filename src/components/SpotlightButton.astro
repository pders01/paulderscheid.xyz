---
export interface Props {
    projectListId: string;
}

const { projectListId } = Astro.props;
---

<div class="spotlight-container">
    <button
        class="btn btn-brand w-full text-sm"
        id="spotlight-btn"
        aria-label="Show projects"
        data-project-list={projectListId}
    >
        Spotlight
    </button>
    <slot />
</div>

<script>
    const spotlightButtons = document.querySelectorAll('#spotlight-btn');

    spotlightButtons.forEach((button) => {
        button.addEventListener('click', () => {
            const projectListId = button.getAttribute('data-project-list');
            if (!projectListId) return;

            const projectList = document.getElementById(projectListId);
            if (!projectList) return;

            const isExpanded = projectList.classList.contains('expanded');

            if (isExpanded) {
                projectList.classList.remove('expanded');
                button.textContent = 'Spotlight';
                button.setAttribute('aria-label', 'Show projects');
            } else {
                projectList.classList.add('expanded');
                button.textContent = 'Hide';
                button.setAttribute('aria-label', 'Hide projects');
            }
        });
    });
</script>

<style>
    .spotlight-container {
        position: relative;
        flex: 1;
    }

    .btn-brand:hover,
    .btn-brand:focus {
        transform: var(--pd-xyz-transform-y-default);
    }

    @media (max-width: 700px) {
        .spotlight-container {
            position: static;
            width: 100%;
        }

        .spotlight-btn {
            width: 100%;
            justify-content: center;
            padding: calc(var(--pd-xyz-spacing) * 0.45)
                calc(var(--pd-xyz-spacing) * 0.25);
            font-size: var(--pd-xyz-font-size-md);
            margin-top: calc(var(--pd-xyz-spacing) * 0.25);
        }
    }
</style>
